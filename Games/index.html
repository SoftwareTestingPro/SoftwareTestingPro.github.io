<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mobile Challenge Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    font-family:'Segoe UI',sans-serif;
    background:linear-gradient(135deg,#4facfe,#00f2fe);
    color:#fff;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
  }
  .container {
    display:flex;flex-direction:column;align-items:center;justify-content:center;
    width:100%;max-width:400px;padding:20px;background:none;box-shadow:none;
  }
  input,select,button {
    width:100%;padding:12px;margin-bottom:12px;border:none;border-radius:8px;font-size:1rem;
  }
  input,select {background:rgba(255,255,255,0.9);color:#333;}
  button {background:#ff6b6b;color:#fff;font-weight:bold;cursor:pointer;}
  button:hover {background:#ff4757;}
  .hidden {display:none;}
  #taskDisplay {
    position:absolute;top:33%;left:50%;transform:translateX(-50%);
    font-size:1.4rem;text-align:center;font-weight:bold;width:80%;
  }
  #nextTaskBtn {
    position:absolute;top:66%;left:50%;transform:translateX(-50%);
    width:80px;height:80px;background:#ff6b6b;border-radius:50%;
    display:flex;align-items:center;justify-content:center;font-size:1.2rem;
    cursor:pointer;animation:beat 1s infinite;
  }
  @keyframes beat {
    0%,100%{transform:translateX(-50%) scale(1);}
    50%{transform:translateX(-50%) scale(1.2);}
  }
  #baseIndicator {
    position:absolute;top:10%;left:50%;transform:translateX(-50%);
    font-size:1.2rem;font-weight:bold;display:flex;align-items:center;gap:10px;
  }
  #baseSwitch {
    position:absolute;bottom:10%;left:50%;transform:translateX(-50%);
    display:flex;gap:10px;
  }
  #baseSwitch button {
    width:80px;height:40px;border-radius:8px;font-size:0.9rem;
  }
</style>
</head>
<body>
<!-- Landing Screen -->
<div class="container" id="landingScreen">
  <h1>Set Players</h1>
  <label for="numPlayers">Number of Players:</label>
  <input type="number" id="numPlayers" min="1" max="10" required>
  <button onclick="createPlayerInputs()">Next</button>
</div>

<!-- Player Setup Screen -->
<div class="container hidden" id="playerScreen">
  <h1>Enter Player Details</h1>
  <div id="players"></div>
  <button onclick="savePlayers()">Save Players</button>
</div>

<!-- Start Screen -->
<div class="container hidden" id="startScreen">
  <button onclick="startGame()" style="width:40vw;height:40vw;">Start Game</button>
</div>

<!-- Game Screen -->
<div class="container hidden" id="gameScreen">
  <div id="baseIndicator"></div>
  <div id="taskDisplay"></div>
  <div id="nextTaskBtn" onclick="nextTask()">‚ù§Ô∏è</div>
  <div id="baseSwitch"></div>
</div>

<script>
let currentPlayerIndex=0,currentBase=1;

// Task sets: include normal tasks and pair tasks (marked with PAIR:)
const baseTasks={
  1:["Do a funny dance!","Tell a joke.","Sing a song.","Act like a celeb.","PAIR:Dance together"],
  2:["Share a fact.","Imitate an animal.","Say a tongue twister.","Describe dream vacation.","PAIR:Sing duet"],
  3:["Do 10 jumping jacks.","Pretend robot.","Whistle a tune.","Balance on one foot.","PAIR:Act a scene"],
  4:["Name 3 countries A.","Alphabet backwards.","Guess color.","Make a poem.","PAIR:Play charades"]
};

// distinct icons for each base
const baseIcons={1:"üî•",2:"‚≠ê",3:"üéµ",4:"‚ö°"};

function createPlayerInputs(){
  const num=document.getElementById('numPlayers').value;
  if(!num||num<1){alert("Enter valid number.");return;}
  const c=document.getElementById('players');c.innerHTML='';
  for(let i=0;i<num;i++){
    c.innerHTML+=`<label>Player ${i+1} Name:</label><input type="text" id="name${i}" required>
    <label>Gender:</label><select id="gender${i}" required>
      <option value="">Select</option><option value="male">Male</option>
      <option value="female">Female</option><option value="other">Other</option></select>`;
  }
  document.getElementById('landingScreen').classList.add('hidden');
  document.getElementById('playerScreen').classList.remove('hidden');
}

function savePlayers(){
  const num=document.getElementById('numPlayers').value;const players=[];
  for(let i=0;i<num;i++){
    const name=document.getElementById(`name${i}`).value.trim();
    const gender=document.getElementById(`gender${i}`).value;
    if(!name||!gender){alert("All fields mandatory.");return;}
    players.push({name,gender});
  }
  localStorage.setItem('players',JSON.stringify(players));
  document.getElementById('playerScreen').classList.add('hidden');
  document.getElementById('startScreen').classList.remove('hidden');
}

function startGame(){
  document.getElementById('startScreen').classList.add('hidden');
  document.getElementById('gameScreen').classList.remove('hidden');
  currentPlayerIndex=0;currentBase=1;
  updateBaseIndicator();updateBaseSwitch();nextTask();
}

function nextTask(){
  const players=JSON.parse(localStorage.getItem('players'))||[];
  if(players.length===0){document.getElementById('taskDisplay').innerText="No players saved!";return;}
  const taskList=baseTasks[currentBase];
  const task=taskList[Math.floor(Math.random()*taskList.length)];

  if(task.startsWith("PAIR:")){
    const males=players.filter(p=>p.gender==="male");
    const females=players.filter(p=>p.gender==="female");
    if(males.length>0&&females.length>0){
      const male=males[Math.floor(Math.random()*males.length)];
      const female=females[Math.floor(Math.random()*females.length)];
      document.getElementById('taskDisplay').innerText=
        `${male.name} to ${task.replace("PAIR:","").toLowerCase()} with ${female.name}`;
    } else {
      document.getElementById('taskDisplay').innerText="Not enough opposite gender players for this task.";
    }
  } else {
    const player=players[currentPlayerIndex];
    document.getElementById('taskDisplay').innerText=`${player.name}: ${task}`;
    currentPlayerIndex=(currentPlayerIndex+1)%players.length;
  }
}

function switchBase(base){
  currentBase=base;
  updateBaseIndicator();updateBaseSwitch();nextTask();
}

function updateBaseIndicator(){
  document.getElementById('baseIndicator').innerHTML=`Base ${currentBase} <div id="baseIndicatorIcon">${baseIcons[currentBase]}</div>`;
}

function updateBaseSwitch(){
  const switchDiv=document.getElementById('baseSwitch');switchDiv.innerHTML='';
  [1,2,3,4].forEach(b=>{
    if(b!==currentBase){
      const btn=document.createElement('button');
      btn.innerText=`Base ${b}`;
      btn.onclick=()=>switchBase(b);
      switchDiv.appendChild(btn);
    }
  });
}
</script>
</body>
</html>