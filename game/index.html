<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mobile Challenge Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    font-family:'Segoe UI',sans-serif;
    background:linear-gradient(135deg,#4facfe,#00f2fe);
    color:#fff;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
  }
  .container {
    display:flex;flex-direction:column;align-items:center;justify-content:center;
    width:100%;max-width:400px;padding:20px;background:none;box-shadow:none;
  }
  input,select,button {
    padding:12px;border:none;border-radius:8px;font-size:1rem;
  }
  input,select {background:rgba(255,255,255,0.9);color:#333;}
  button {background:#ff6b6b;color:#fff;font-weight:bold;cursor:pointer;}
  button:hover {background:#ff4757;}
  .hidden {display:none;}

  /* Landing page input + button side by side */
  #landingControls {
    display:flex;gap:10px;width:100%;
  }
  #numPlayers {flex:3;} /* 30% */
  #nextBtn {flex:7;}    /* 70% */

  /* Player details input + select side by side */
  .playerRow {
    display:flex;gap:10px;width:100%;margin-bottom:12px;
  }
  .playerRow input {flex:7;}
  .playerRow select {flex:3;}

  /* Task styling */
  #taskDisplay {
    position:absolute;top:33%;left:50%;transform:translateX(-50%);
    font-size:2rem;text-align:center;font-weight:bold;width:80%;
    font-family:'Trebuchet MS',sans-serif;
    text-shadow:2px 2px 4px rgba(0,0,0,0.4);
    letter-spacing:1px;
  }
  #nextTaskBtn {
    position:absolute;top:66%;left:50%;transform:translateX(-50%);
    width:80px;height:80px;background:#ff6b6b;border-radius:50%;
    display:flex;align-items:center;justify-content:center;font-size:1.2rem;
    cursor:pointer;animation:beat 1s infinite;
  }
  @keyframes beat {
    0%,100%{transform:translateX(-50%) scale(1);}
    50%{transform:translateX(-50%) scale(1.2);}
  }
  #baseIndicator {
    position:absolute;top:10%;left:50%;transform:translateX(-50%);
    font-size:1.2rem;font-weight:bold;display:flex;align-items:center;gap:10px;
  }
  #baseSwitch {
    position:absolute;bottom:10%;left:50%;transform:translateX(-50%);
    display:flex;gap:10px;
  }
  #baseSwitch button {
    width:auto;padding:8px 12px;border-radius:8px;font-size:0.9rem;
    display:flex;align-items:center;gap:6px;
  }
</style>
</head>
<body>
<!-- Landing Screen -->
<div class="container" id="landingScreen">
  <h1>Set Players</h1>
  <div id="landingControls">
    <input type="number" id="numPlayers" min="1" max="10" required>
    <button id="nextBtn" onclick="createPlayerInputs()">Next</button>
  </div>
</div>

<!-- Player Setup Screen -->
<div class="container hidden" id="playerScreen">
  <h1>Enter Player Details</h1>
  <div id="players"></div>
  <button onclick="savePlayers()">Save Players</button>
</div>

<!-- Start Screen -->
<div class="container hidden" id="startScreen">
  <button onclick="startGame()" style="width:40vw;height:40vw;">Start Game</button>
</div>

<!-- Game Screen -->
<div class="container hidden" id="gameScreen">
  <div id="baseIndicator"></div>
  <div id="taskDisplay"></div>
  <div id="nextTaskBtn" onclick="nextTask()">‚ù§Ô∏è</div>
  <div id="baseSwitch"></div>
</div>

<script>
let currentPlayerIndex=0,currentBase=1;
let maleIndex=0,femaleIndex=0; // round robin indices for partners

const baseTasks={
  1:["Do a funny dance!","Tell a joke.","Sing a song.","Act like a celeb.","PAIR:Dance together"],
  2:["Share a fact.","Imitate an animal.","Say a tongue twister.","Describe dream vacation.","PAIR:Sing duet"],
  3:["Do 10 jumping jacks.","Pretend robot.","Whistle a tune.","Balance on one foot.","PAIR:Act a scene"],
  4:["Name 3 countries A.","Alphabet backwards.","Guess color.","Make a poem.","PAIR:Play charades"]
};

// ‚úÖ Updated icons
const baseIcons={1:"ü•≥",2:"ü§ì",3:"ü´¶",4:"üëô"};

function createPlayerInputs(){
  const num=document.getElementById('numPlayers').value;
  if(!num||num<1){alert("Enter valid number.");return;}
  const c=document.getElementById('players');c.innerHTML='';
  for(let i=0;i<num;i++){
    c.innerHTML+=`
      <div class="playerRow">
        <input type="text" id="name${i}" placeholder="Player ${i+1} Name" required>
        <select id="gender${i}" required>
          <option value="">Gender</option>
          <option value="male">Male</option>
          <option value="female">Female</option>
        </select>
      </div>`;
  }
  document.getElementById('landingScreen').classList.add('hidden');
  document.getElementById('playerScreen').classList.remove('hidden');
}

function savePlayers(){
  const num=document.getElementById('numPlayers').value;const players=[];
  for(let i=0;i<num;i++){
    const name=document.getElementById(`name${i}`).value.trim();
    const gender=document.getElementById(`gender${i}`).value;
    if(!name||!gender){alert("All fields mandatory.");return;}
    players.push({name,gender});
  }
  localStorage.setItem('players',JSON.stringify(players));
  document.getElementById('playerScreen').classList.add('hidden');
  document.getElementById('startScreen').classList.remove('hidden');
}

function startGame(){
  document.getElementById('startScreen').classList.add('hidden');
  document.getElementById('gameScreen').classList.remove('hidden');
  currentPlayerIndex=0;currentBase=1;maleIndex=0;femaleIndex=0;
  updateBaseIndicator();updateBaseSwitch();nextTask();
}

function nextTask(){
  const players=JSON.parse(localStorage.getItem('players'))||[];
  if(players.length===0){document.getElementById('taskDisplay').innerText="No players saved!";return;}
  const taskList=baseTasks[currentBase];
  const task=taskList[Math.floor(Math.random()*taskList.length)];

  const currentPlayer=players[currentPlayerIndex];

  if(task.startsWith("PAIR:")){
    let partner=null;
    if(currentPlayer.gender==="male"){
      const females=players.filter(p=>p.gender==="female");
      if(females.length>0){
        partner=females[femaleIndex % females.length];
        femaleIndex++;
      }
    } else if(currentPlayer.gender==="female"){
      const males=players.filter(p=>p.gender==="male");
      if(males.length>0){
        partner=males[maleIndex % males.length];
        maleIndex++;
      }
    }
    if(partner){
      document.getElementById('taskDisplay').innerText=
        `${currentPlayer.name} to ${task.replace("PAIR:","").toLowerCase()} with ${partner.name}`;
    } else {
      document.getElementById('taskDisplay').innerText=
        `No opposite gender partner available for ${currentPlayer.name}'s task.`;
    }
  } else {
    document.getElementById('taskDisplay').innerText=`${currentPlayer.name}: ${task}`;
  }

  currentPlayerIndex=(currentPlayerIndex+1)%players.length;
}

function switchBase(base){
  currentBase=base;
  updateBaseIndicator();updateBaseSwitch();nextTask();
}

function updateBaseIndicator(){
  document.getElementById('baseIndicator').innerHTML=`Base ${currentBase} <div id="baseIndicatorIcon">${baseIcons[currentBase]}</div>`;
}

function updateBaseSwitch(){
  const switchDiv=document.getElementById('baseSwitch');switchDiv.innerHTML='';
  [1,2,3,4].forEach(b=>{
    if(b!==currentBase){
      const btn=document.createElement('button');
      btn.innerHTML=`${baseIcons[b]} Base ${b}`; // show icon + name
      btn.onclick=()=>switchBase(b);
      switchDiv.appendChild(btn);
    }
  });
}
</script>
</body>
</html>